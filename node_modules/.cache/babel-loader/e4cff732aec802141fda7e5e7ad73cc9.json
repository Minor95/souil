{"ast":null,"code":"const initialState = {\n  siningUp: false,\n  siningIn: false,\n  error: null,\n  message: null,\n  token: localStorage.getItem('token')\n};\nexport default function authorization() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'authorization/singUp/pending':\n      return { ...state,\n        siningUp: true,\n        error: null,\n        message: null\n      };\n\n    case 'authorization/singUp/fulfilled':\n      return { ...state,\n        siningUp: false,\n        message: action.message\n      };\n\n    case 'authorization/singUp/rejected':\n      return { ...state,\n        siningUp: false,\n        error: action.error\n      };\n\n    case 'authorization/singIn/pending':\n      return { ...state,\n        siningIn: true,\n        error: null,\n        message: null\n      };\n\n    case 'authorization/singIn/fulfilled':\n      return { ...state,\n        siningIn: false,\n        message: action.message,\n        token: action.payload.token\n      };\n\n    case 'authorization/singIn/rejected':\n      return { ...state,\n        siningIn: false,\n        error: action.error\n      };\n\n    default:\n      return state;\n  }\n}\nexport const userCreate = (login, password) => {\n  return async dispatch => {\n    dispatch({\n      type: 'authorization/singUp/pending'\n    });\n    const response = await fetch('/users/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        login,\n        password\n      }),\n      headers: {\n        'Content-type': 'application/json'\n      }\n    });\n    const json = await response.json();\n\n    if (json.error) {\n      dispatch({\n        type: 'authorization/singUp/rejected',\n        error: json.error\n      });\n    } else {\n      dispatch({\n        type: 'authorization/singUp/fulfilled',\n        message: json.message,\n        payload: json\n      });\n    }\n  };\n};\nexport const userLogin = (login, password) => {\n  return async dispatch => {\n    dispatch({\n      type: 'authorization/singIn/pending'\n    });\n    const response = await fetch('/users/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        login,\n        password\n      }),\n      headers: {\n        'Content-type': 'application/json'\n      }\n    });\n    const json = await response.json();\n\n    if (json.error) {\n      dispatch({\n        type: 'authorization/singIn/rejected',\n        error: json.error\n      });\n    } else {\n      dispatch({\n        type: 'authorization/singIn/fulfilled',\n        error: json.error,\n        message: json.error,\n        payload: json\n      });\n      localStorage.setItem('token', json.token);\n    }\n  };\n};","map":{"version":3,"names":["initialState","siningUp","siningIn","error","message","token","localStorage","getItem","authorization","state","action","type","payload","userCreate","login","password","dispatch","response","fetch","method","body","JSON","stringify","headers","json","userLogin","setItem"],"sources":["C:/Users/winst/Desktop/soul-noise/client/src/redux/features/authorization.js"],"sourcesContent":["const initialState = {\r\n  siningUp: false,\r\n  siningIn: false,\r\n  error: null,\r\n  message: null,\r\n  token: localStorage.getItem('token'),\r\n}\r\n\r\nexport default function authorization(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'authorization/singUp/pending':\r\n      return {\r\n        ...state,\r\n        siningUp: true,\r\n        error: null,\r\n        message: null,\r\n      }\r\n    case 'authorization/singUp/fulfilled':\r\n      return {\r\n        ...state,\r\n        siningUp: false,\r\n        message: action.message,\r\n      }\r\n    case 'authorization/singUp/rejected':\r\n      return {\r\n        ...state,\r\n        siningUp: false,\r\n        error: action.error,\r\n      }\r\n\r\n    case 'authorization/singIn/pending':\r\n      return {\r\n        ...state,\r\n        siningIn: true,\r\n        error: null,\r\n        message: null,\r\n      }\r\n    case 'authorization/singIn/fulfilled':\r\n      return {\r\n        ...state,\r\n        siningIn: false,\r\n        message: action.message,\r\n        token: action.payload.token,\r\n      }\r\n    case 'authorization/singIn/rejected':\r\n      return {\r\n        ...state,\r\n        siningIn: false,\r\n        error: action.error,\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const userCreate = (login, password) => {\r\n  return async dispatch => {\r\n    dispatch({ type: 'authorization/singUp/pending' })\r\n\r\n    const response = await fetch('/users/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ login, password }),\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n      },\r\n    })\r\n\r\n    const json = await response.json()\r\n    if (json.error) {\r\n      dispatch({\r\n        type: 'authorization/singUp/rejected',\r\n        error: json.error,\r\n      })\r\n    } else {\r\n      dispatch({\r\n        type: 'authorization/singUp/fulfilled',\r\n        message: json.message,\r\n        payload: json,\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const userLogin = (login, password) => {\r\n  return async dispatch => {\r\n    dispatch({ type: 'authorization/singIn/pending' })\r\n\r\n    const response = await fetch('/users/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ login, password }),\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n      },\r\n    })\r\n\r\n    const json = await response.json()\r\n    if (json.error) {\r\n      dispatch({\r\n        type: 'authorization/singIn/rejected',\r\n        error: json.error,\r\n      })\r\n    } else {\r\n      dispatch({\r\n        type: 'authorization/singIn/fulfilled',\r\n        error: json.error,\r\n        message: json.error,\r\n        payload: json,\r\n      })\r\n      localStorage.setItem('token', json.token)\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}